name: Deploy to *.github.io

on:
  push:
    branches:
      - master
      - test-auto-deploy
      
jobs:
  hugo-deploy-gh-pages:
    runs-on: ubuntu-latest
    steps:
    
    - name: checkout hugo blog
      uses: actions/checkout@master
       
    
    - name: checkout static site content
      uses: actions/checkout@master
      with:
        repository: nivehangeul/nivehangeul.github.io
        ref: master
        path: ./dist
    
    - name: hugo-deploy-gh-pages
      uses: codenio/gh-actions-hugo-deploy-gh-pages@feature/preserve-commits
      env:
        GITHUB_REMOTE_REPOSITORY: nivehangeul/nivehangeul.github.io
        GITHUB_BRANCH: master
        GIT_DEPLOY_KEY: ${{ secrets.GIT_DEPLOY_KEY }}
        HUGO_VERSION: "0.58.3"